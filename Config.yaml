# ä¸‹è½½é…ç½®å,è¯·æ‰‹åŠ¨æ·»åŠ æœºåœºè®¢é˜…
# æ‰¾åˆ° {è¿œç¨‹è®¢é˜…} éƒ¨åˆ†ï¼Œå°†MyProxy éƒ¨åˆ†çš„ urlæ›¿æ¢ä¸ºè‡ªå·±çš„æœºåœºè®¢é˜…é“¾æ¥  

subscribe-url: ä½ çš„è®¢é˜…é“¾æ¥
# æ›¿æ¢ä¸Šé¢æ–‡å­—ç”¨äºStashè·å–æœºåœºæµé‡ä¿¡æ¯å¹¶åœ¨ä¸»é¡µæ˜¾ç¤º

#æ··åˆç«¯å£
mixed-port: 7890
#å…è®¸å±€åŸŸç½‘
allow-lan: true
#ç»‘å®šåœ°å€
bind-address: '*'
#æ¨¡å¼:ruleï¼ˆè§„åˆ™ï¼‰ / globalï¼ˆå…¨å±€ä»£ç†ï¼‰/ directï¼ˆå…¨å±€ç›´è¿ï¼‰
mode: Rule
#æ—¥å¿—çº§åˆ«ï¼ˆæ—¥å¿—è¾“å‡ºçº§åˆ«ï¼šåˆ†çº§å¦‚åsilent / info / warning / error / debugçº§åˆ«è¶Šé«˜æ—¥å¿—è¾“å‡ºé‡è¶Šå¤§ï¼‰
log-level: silent
#å¤–éƒ¨æ§åˆ¶å™¨
external-controller: 127.0.0.1:9090

#DNSè®¾ç½®
dns:
  enable: true
  listen: 0.0.0.0:1053
  #DNSæœåŠ¡å™¨
  default-nameserver:
    - 119.29.29.29
    - 119.28.28.28
    - 223.5.5.5
    - 114.114.114.114
  #DoHæœåŠ¡å™¨
  nameserver:
    - https://dns.alidns.com/dns-query
    - https://doh.dns.sb/dns-query
  enhanced-mode: fake-ip
  fake-ip-range: 198.18.0.1/16
  #åˆ—è¡¨ä¸­çš„åŸŸåå°†ä¸ä¼šè¢«è§£æä¸ºfake ipï¼Œè¿™äº›åŸŸåç›¸å…³çš„è§£æè¯·æ±‚å°†ä¼šè¿”å›å®ƒä»¬çœŸå®çš„IPåœ°å€
  fake-ip-filter:
    - '*.lan'
    - localhost.ptlogin2.qq.com
    - '+.srv.nintendo.net'
    - '+.stun.playstation.net'
    - '+.msftconnecttest.com'
    - '+.msftncsi.com'
    - '+.xboxlive.com'
    - 'msftconnecttest.com'
    - 'xbox.*.microsoft.com'
    - '*.battlenet.com.cn'
    - '*.battlenet.com'
    - '*.blzstatic.cn'
    - '*.battle.net'

#æœ¬åœ°ä»£ç†
proxies:

#è¿œç¨‹è®¢é˜…
proxy-providers:

  MyProxy: &MyProxy #å»ºç«‹é”šç‚¹
    url: "https://sub.store/download/collection/MySub"
    # ä½¿ç”¨Clashç±»å‹è®¢é˜…é“¾æ¥æ›¿æ¢æ‰å¼•å·""å†…çš„é“¾æ¥ä½¿ç”¨ã€‚
    # æˆ–å¯ä½¿ç”¨é€šç”¨è®¢é˜…é“¾æ¥é€šè¿‡Sub-Storeè¿›è¡Œè®¢é˜…è½¬æ¢ã€‚
    interval: 86400
    health-check:
      enable: true
      interval: 3600
      url: http://cp.cloudflare.com/generate_204
  
  #é¦™æ¸¯èŠ‚ç‚¹
  MyProxy-HK:
    <<: *MyProxy #å¼•ç”¨é”šç‚¹å†…å®¹
    filter: "(?=.*(æ¸¯|HK|ğŸ‡­ğŸ‡°|(?i)Hong))^((?!(å°|æ—¥|éŸ©|æ–°|ç¾)).)*$"
  
  #æ—¥æœ¬èŠ‚ç‚¹
  MyProxy-JP:
    <<: *MyProxy #å¼•ç”¨é”šç‚¹å†…å®¹
    filter: "(?=.*(æ—¥|JP|ğŸ‡¯ğŸ‡µ|(?i)Japan))^((?!(æ¸¯|å°|éŸ©|æ–°|ç¾|åˆ©äºš)).)*$"

  #ç¾å›½èŠ‚ç‚¹
  MyProxy-US:
    <<: *MyProxy #å¼•ç”¨é”šç‚¹å†…å®¹
    filter: "(?=.*(ç¾|US|ğŸ‡ºğŸ‡¸|(?i)States|American))^((?!(æ¸¯|å°|æ—¥|éŸ©|æ–°)).)*$"
  
  #å°æ¹¾èŠ‚ç‚¹
  #MyProxy-TW:
    #<<: *MyProxy #å¼•ç”¨é”šç‚¹å†…å®¹
    #filter: "(?=.*(å°|TW|(?i)Taiwan))^((?!(æ¸¯|æ—¥|éŸ©|æ–°|ç¾)).)*$"
  
  #æ–°åŠ å¡èŠ‚ç‚¹
  MyProxy-SG:
    <<: *MyProxy #å¼•ç”¨é”šç‚¹å†…å®¹
    filter: "(?=.*(æ–°|ç‹®|ç…|SG|ğŸ‡¸ğŸ‡¬|(?i)Singapore))^((?!(æ¸¯|å°|æ—¥|éŸ©|ç¾)).)*$"

  #å›½é™…èŠ‚ç‚¹
  MyProxy-GJ:
    <<: *MyProxy #å¼•ç”¨é”šç‚¹å†…å®¹
    filter: "(?=.*)^((?!(æ¸¯|HK|æ—¥|JP|å°|TW|è¶Š|VN|æ–°|SG|ç¾|US|ğŸ‡¨ğŸ‡³|ğŸ‡­ğŸ‡°|ğŸ‡ºğŸ‡¸|ğŸ‡¯ğŸ‡µ|ğŸ‡»ğŸ‡³|ğŸ‡¸ğŸ‡¬)).)*$"

#ç­–ç•¥ç»„
proxy-groups:

  - name: Proxy
    type: select
    use:
      - MyProxy
    icon: https://raw.githubusercontent.com/Softlyx/QuantumultX/main/icon/wukong.png

  - name: è‡ªåŠ¨é€‰æ‹©
    type: url-test
    icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Rocket.png
    use: 
       - MyProxy
    url: "http://cp.cloudflare.com/generate_204"
    interval: 300

  - name: Fallback
    type: fallback
    icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Available.png
    use:
      - MyProxy
    url: "http://cp.cloudflare.com/generate_204"
    interval: 300

  - name: HK é¦™æ¸¯
    type: url-test
    icon: https://raw.githubusercontent.com/Orz-3/mini/master/Color/HK.png
    use:
      - MyProxy-HK
    url: "http://cp.cloudflare.com/generate_204"
    interval: 300
  
  - name: JP æ—¥æœ¬
    type: url-test
    icon: https://raw.githubusercontent.com/Orz-3/mini/master/Color/JP.png
    use:
      - MyProxy-JP
    url: "http://cp.cloudflare.com/generate_204"
    interval: 300
  
  - name: US ç¾å›½
    type: url-test
    icon: https://raw.githubusercontent.com/Orz-3/mini/master/Color/US.png
    use:
      - MyProxy-US
    url: "http://cp.cloudflare.com/generate_204"
    interval: 300

  - #name: TW å°æ¹¾
    #type: url-test
    #icon: https://raw.githubusercontent.com/Orz-3/mini/master/Color/TW.png
    #use:
      #- MyProxy-TW
    #url: "http://cp.cloudflare.com/generate_204"
    #interval: 300
  
  - name: SG æ–°åŠ å¡
    type: url-test
    icon: https://raw.githubusercontent.com/Orz-3/mini/master/Color/SG.png
    use:
      - MyProxy-SG
    url: "http://cp.cloudflare.com/generate_204"
    interval: 300
  
  - name: GJ å›½é™…
    type: url-test
    icon: https://raw.githubusercontent.com/Orz-3/mini/master/Color/UN.png
    use:
      - MyProxy-GJ
    url: "http://cp.cloudflare.com/generate_204"
    interval: 300

  - name: å…¨çƒ
    type: select
    proxies: &G
      - è‡ªåŠ¨é€‰æ‹©
      - Fallback
      - US ç¾å›½
      - HK é¦™æ¸¯
      - JP æ—¥æœ¬
      - SG æ–°åŠ å¡
      - æ¼ç½‘ä¹‹é±¼
      - DIRECT
    icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/World_Map.png
  
  - name: å›½é™…åª’ä½“
    type: select
    proxies:
      *G
    icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Media.png
  
  - name: TikTok
    type: select
    proxies:
      *G
    icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/TikTok.png
  
  - name: å›½é™…ç¤¾äº¤
    type: select
    proxies:
      *G
    icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Telegram.png
  
  - name: Speedtest
    type: select
    proxies:
      *G
    icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Speedtest.png
  
  - name: TestFlight
    type: select
    proxies:
      *G
    icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/TestFlight.png
  
  - name: AppleæœåŠ¡
    type: select
    proxies:
      *G
    icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Apple.png
  
  - name: å…¨çƒåŠ é€Ÿ
    type: select
    proxies:
      *G
    icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Google.png
  
  - name: å›½å†…æœåŠ¡
    type: select
    proxies:
      - DIRECT
      - è‡ªåŠ¨é€‰æ‹©
      - Fallback
      - US ç¾å›½
      - HK é¦™æ¸¯
      - JP æ—¥æœ¬
      - SG æ–°åŠ å¡
      - æ¼ç½‘ä¹‹é±¼
    icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Heart.png
  
  - name: æ¼ç½‘ä¹‹é±¼
    type: select
    proxies:
      - Proxy
      - DIRECT
    icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Pig.png

#è¿œç¨‹è§„åˆ™é›†åˆ
rule-providers:
    

  Youtube-rules:
    behavior: classical
    interval: 86400
    name: Youtube
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/release/rule/Clash/YouTube/YouTube.yaml

  TikTok-rules:
    behavior: classical
    interval: 86400
    name: TikTok
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/release/rule/Clash/TikTok/TikTok.yaml

  Telegram-rules:
    behavior: classical
    interval: 86400
    name: Telegram
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/release/rule/Clash/Telegram/Telegram.yaml

  Twitter-rules:
    behavior: classical
    interval: 86400
    name: Twitter
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/release/rule/Clash/Twitter/Twitter.yaml

  Speedtest-rules:
    behavior: classical
    interval: 86400
    name: Speedtest
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/release/rule/Clash/Speedtest/Speedtest.yaml

  TestFlight-rules:
    behavior: classical
    interval: 86400
    name: TestFlight
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/release/rule/Clash/TestFlight/TestFlight.yaml

  Apple-rules:
    behavior: classical
    interval: 86400
    name: Apple
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/release/rule/Clash/Apple/Apple.yaml

  Google-rules:
    behavior: classical
    interval: 86400
    name: Google
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/release/rule/Clash/Google/Google.yaml

  Microsoft-rules:
    behavior: classical
    interval: 86400
    name: Microsoft
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/release/rule/Clash/Microsoft/Microsoft.yaml

  Mainland-rules:
    behavior: classical
    interval: 86400
    name: Mainland
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/release/rule/Clash/China/China.yaml

  MainlandIP-rules:
    behavior: ipcidr
    interval: 86400
    name: MainlandIP
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/release/rule/Clash/ChinaIPs/ChinaIPs_IP.yaml

  Global-rules:
    behavior: classical
    interval: 86400
    name: Global
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/release/rule/Clash/Global/Global_Classical.yaml

  #ASN-rules: 
    #behavior: classical
    #interval: 86400
    #name: ASN
    #url: https://raw.githubusercontent.com/Coldvvater/Clash/master/RuleSet/ASN_China.yaml

#åˆ†æµè§„åˆ™å¼•ç”¨
rules:
  - RULE-SET,Youtube-rules,å›½é™…åª’ä½“
  - RULE-SET,TikTok-rules,TikTok
  - RULE-SET,Telegram-rules,å›½é™…ç¤¾äº¤
  - RULE-SET,Twitter-rules,å›½é™…ç¤¾äº¤
  - RULE-SET,Speedtest-rules,Speedtest
  - RULE-SET,TestFlight-rules,AppleæœåŠ¡
  - RULE-SET,Apple-rules,AppleæœåŠ¡
  - RULE-SET,Google-rules,å…¨çƒåŠ é€Ÿ
  - RULE-SET,Microsoft-rules,å›½å†…æœåŠ¡
  - RULE-SET,Mainland-rules,å›½å†…æœåŠ¡
  - RULE-SET,MainlandIP-rules,å›½å†…æœåŠ¡
  - RULE-SET,Global-rules,å…¨çƒåŠ é€Ÿ
# âš æ³¨æ„ï¼šæœ¬é…ç½®ç›®å‰ä¸»æµä½¿ç”¨ASNè§„åˆ™ä½œä¸ºä¸­å›½å¤§é™†åˆ†æµï¼Œå¦‚ä¸æƒ³ä½¿ç”¨ï¼Œè¯·åœ¨ASNè§„åˆ™å‰é¢åŠ #å·æ³¨é‡Šï¼ŒåŒæ—¶æŠŠMainland-rulesã€MainlandIP-rulesåŠGEOIPå‰é¢çš„#å·åˆ é™¤æ”¾è¡Œä½¿å…¶ç”Ÿæ•ˆã€‚
  #- RULE-SET,ASN-rules,DIRECT
  - GEOIP,CN,å›½å†…æœåŠ¡
  - MATCH,æ¼ç½‘ä¹‹é±¼
